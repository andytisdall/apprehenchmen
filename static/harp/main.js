!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){const n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=[0,2,4,5,7,9,11],r=[0,2,3,5,7,8,10];let l;Tone.Transport.bpm.value=800;let c,s="C",i=o,a=!1,d=!1,u=[0,2,4],g=!1;document.querySelector("body").addEventListener("click",()=>{g||(async()=>{await Tone.start(),console.log("Audio is Ready"),g=!0})()});const m=new Tone.Reverb({decay:2.5}).toDestination(),p=new Tone.PolySynth(Tone.FMSynth).connect(m),y=new Tone.PolySynth(Tone.FMSynth).connect(m);p.set({envelope:{release:1.2,sustain:.3}}),y.set({envelope:{release:1.2,sustain:.3}}),p.volume.value=-10,y.volume.value=-10,n.forEach(e=>{document.getElementById("major").insertAdjacentHTML("beforeend",`<div class="chordball">\n        <div class="chord major" id='${e}'>${e}</div>\n        </div>`),document.getElementById("minor").insertAdjacentHTML("beforeend",`<div class="chordball">\n        <div class="chord minor" id='${e}m'>${e}m</div>\n        </div>`)}),document.querySelector(".container").addEventListener("click",e=>{if(e.target.matches(".chord")){let t=e.target.id;console.log(t),v(t),q(),d?O():k?B():w()}});const v=e=>{if(e.endsWith("m")){let t=e.slice(0,-1);f(t,r)}else{f(e,o)}},f=(e,t)=>{s=e,i=t},h=document.getElementById("speedslider"),T=document.getElementById("speed");let b=.625/(h.value/7);T.innerHTML=h.value+"%",h.oninput=()=>{T.innerHTML=h.value+"%",b=.625/(h.value/7)};const S=document.getElementById("oct");let L=S.value;S.addEventListener("change",()=>{L=S.value});const x=document.querySelector(".revselect");let E=!1;x.addEventListener("click",()=>{E?(E=!1,x.textContent="Ascending"):(E=!0,x.textContent="Descending"),x.classList.toggle("reverse")});let C=2;const j=document.getElementById("octamount");j.textContent=C;document.querySelector(".addoctave").addEventListener("click",e=>{"plus"===e.target.id?(C+=1,j.textContent=C):"minus"===e.target.id&&C>1&&(C-=1,j.textContent=C)});const M=document.querySelector(".doubleselect");let k=!1;M.addEventListener("click",()=>{k?(k=!1,M.textContent="Single Stroke"):(k=!0,M.textContent="Double Stroke"),M.classList.toggle("doubled")});const A=document.querySelector(".loopselect");A.addEventListener("click",()=>{d?(d=!1,c&&c.stop(),A.textContent="No Loop"):(d=!0,A.textContent="Looping"),A.classList.toggle("looped")});const I=()=>{let e=l.slice(-3).map(e=>{let t=e.slice(-1);return t=(parseInt(t)+1).toString(),e.slice(0,-1)+t});l=l.concat(e)},q=()=>{(()=>{l=n;const e=l.findIndex(e=>e===s);if(0!==e){const t=l.slice(e),n=l.slice(0,e);l=t.concat(n)}})(),(()=>{let e=L;l=l.map((t,n)=>0!==n&&"C"===t?(e=(parseInt(e)+1).toString(),t+e):t+e)})(),(()=>{let e=u.map(e=>i[e]);l=e.map(e=>l[e]);let t=(parseInt(L)+1).toString();l.push(s+t)})();for(let e=1;e<C;e++)I();!0===E&&l.reverse()},w=(e=0)=>{let t,n,o;t=e||Tone.immediate(),[n,o]=H();for(let e=0;e<n.length;e++)Tone.Transport.schedule(t=>{try{p.triggerAttackRelease(n[e],"4n"),console.log("synth 1 plays "+n[e])}catch(e){console.log("Going Haywire!"),a||P(e)}},t),t+=b,o[e]&&Tone.Transport.schedule(t=>{try{y.triggerAttackRelease(o[e],"4n"),console.log("synth 2 plays "+o[e])}catch(e){console.log("Going Haywire!"),a||P(e)}},t),t+=b;return t},H=()=>{let e=[],t=[];for(let n=0;n<l.length;n+=2)e.push(l[n]),l[n+1]&&t.push(l[n+1]);return[e,t]},P=e=>{synth.disconnect(),a=!0,document.querySelector(".error").classList.toggle("error-message"),document.querySelector(".error").insertAdjacentHTML("beforeend",`<h1>The Harpist Became Confused.  Please Reload the Page.</h1>\n    <p>${e}</p>`),document.querySelector(".logo").insertAdjacentHTML("beforeend",'<img src="images/deku.png" width="350px">')},B=()=>{let e=w()+b;return l.reverse(),w(e)+b},O=()=>{c&&c.stop();let e,t=Tone.immediate();k?(e=B()+7*b,l.reverse()):e=w()+7*b;let n=e-t;c=new Tone.Loop(e=>{k?(q(),B(),l.reverse()):(q(),w())},n).start(e)};q(),Tone.Transport.start()}]);